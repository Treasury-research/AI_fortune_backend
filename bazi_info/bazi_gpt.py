import sxtwl
import argparse
import collections
import pprint
import datetime
from collections import OrderedDict
import openai
import os
import json
from openai import OpenAI
from lunar_python import Lunar
from colorama import init
from bazi_info.sizi import summarys
from bazi_info.sizi_gpt import summary
from bidict import bidict

client = OpenAI()
Gan = ["ç”²", "ä¹™", "ä¸™", "ä¸", "æˆŠ", "å·±", "åºš", "è¾›", "å£¬", "ç™¸"]
Zhi = ["å­", "ä¸‘", "å¯…", "å¯", "è¾°", "å·³", "åˆ", "æœª", "ç”³", "é…‰", "æˆŒ", "äº¥"]
shishen_shensha = {
    "æ­£å®˜": "æ”¿åºœã€æƒåŠ›ã€è§„åˆ™ã€æ³•å¾‹ã€‚æ­£ç›´ã€å‹¤å¥‹ã€å…‹åˆ¶ã€å®ˆä¿¡ã€‚å¥³å‘½ä¸ˆå¤«ã€å§»ç¼˜ã€‚",
    "ä¸ƒæ€": "ç–¾ç—…ã€å°äººã€è´«ç©·ã€å®˜éã€‚å¤šç–‘ã€å†²åŠ¨ã€å¥½æ–—ã€‚å¥³å‘½æƒ…äººã€‚",
    "æ­£å°": "å­¦å†ã€è¯ä¹¦ã€è´µäººã€åœ°ä½ã€‚å–„è‰¯ã€æœ‰çˆ±å¿ƒã€æœ‰ä¿®å…»ã€‚æ¯äº²ã€‚",
    "åå°": "å®—æ•™ã€å¤±ä¸šã€å­¦æœ¯ã€åä¸šã€‚ç²¾æ˜ã€è­¦è§‰ã€åˆ›é€ åŠ›ã€å­¤ç‹¬ã€‚ç»§æ¯ã€‚",
    "æ­£è´¢": "é’±è´¢ã€äº‹ä¸šã€å¯Œè£•ã€å¥åº·ã€‚å‹¤ä¿­ã€ä¸“ä¸€ã€ç°å®ã€æ•æ„Ÿã€‚ç”·å‘½å¦»å­ã€å§»ç¼˜ã€‚",
    "åè´¢": "è´¢è¿ã€å¯Œè£•ã€æ‰è‰ºã€å‰¯ä¸šã€‚è±è¾¾ã€äº¤é™…ã€é£æµã€æ‹œé‡‘ã€‚ç”·å‘½æƒ…äººã€å§»ç¼˜ã€‚",
    "é£Ÿç¥": "å¹³å®‰ã€å£ç¦ã€æ‰è‰ºã€æ™ºæ…§ã€‚å®½å®¹ã€äººç¼˜å¥½ã€æ–¯æ–‡ã€å¥‰çŒ®ã€‚å­å¥³ã€‚",
    "ä¼¤å®˜": "èªæ˜ã€æ‰åã€æŠ€æœ¯ã€å•†ä¸šã€‚æ‚Ÿæ€§ã€å¼ æ‰¬ã€åˆ›æ–°ã€éª„å‚²ã€‚å…‹å¤«ã€‚",
    "æ¯”è‚©": "å…„å¼Ÿã€å…¬å¹³ã€ç«äº‰ã€ç²¾åŠ›ã€‚æ¯…åŠ›ã€å‹¤å¥‹ã€è‡ªå°Šã€æ‰§è¡ŒåŠ›ã€‚å…„å¼Ÿã€‚",
    "åŠ«è´¢": "å®˜éã€è´«å›°ã€ç ´è´¢ã€ç–¾ç—…ã€‚äº‰æ–—ã€è‡ªæˆ‘ã€å†²åŠ¨ã€ç›´ç‡ã€‚å…‹å¦»ã€‚"
}
gan5 = {"ç”²":"æœ¨", "ä¹™":"æœ¨", "ä¸™":"ç«", "ä¸":"ç«", "æˆŠ":"åœŸ", "å·±":"åœŸ", 
        "åºš":"é‡‘", "è¾›":"é‡‘", "å£¬":"æ°´", "ç™¸":"æ°´"}
zhi5 = {
    "å­":OrderedDict({"ç™¸":8}), 
    "ä¸‘":OrderedDict({"å·±":5, "ç™¸":2, "è¾›":1,}), 
    "å¯…":OrderedDict({"ç”²":5, "ä¸™":2, "æˆŠ":1, }),
    "å¯":OrderedDict({"ä¹™":8}),
    "è¾°":OrderedDict({"æˆŠ":5, "ä¹™":2, "ç™¸":1, }),
    "å·³":OrderedDict({ "ä¸™":5, "æˆŠ":2, "åºš":1,}),
    "åˆ":OrderedDict({"ä¸":5, "å·±":3, }),
    "æœª":OrderedDict({"å·±":5, "ä¸":2, "ä¹™":1,}),
    "ç”³":OrderedDict({"åºš":5, "å£¬":2, "æˆŠ":1, }),
    "é…‰":OrderedDict({"è¾›":8}),
    "æˆŒ":OrderedDict({"æˆŠ":5, "è¾›":2, "ä¸":1 }),
    "äº¥":OrderedDict({"å£¬":5, "ç”²":3, })}
ten_deities = {
    'ç”²':bidict({'ç”²':'æ¯”', "ä¹™":'åŠ«', "ä¸™":'é£Ÿ', "ä¸":'ä¼¤', "æˆŠ":'æ‰',
                  "å·±":'è´¢', "åºš":'æ€', "è¾›":'å®˜', "å£¬":'æ­', "ç™¸":'å°', "å­":'æ²', 
                  "ä¸‘":'å† ', "å¯…":'å»º', "å¯":'å¸', "è¾°":'è¡°', "å·³":'ç—…', "åˆ":'æ­»', 
                  "æœª":'å¢“', "ç”³":'ç»', "é…‰":'èƒ', "æˆŒ":'å…»', "äº¥":'é•¿', 'åº“':'æœª_', 
                  'æœ¬':'æœ¨', 'å…‹':'åœŸ', 'è¢«å…‹':'é‡‘', 'ç”Ÿæˆ‘':'æ°´', 'ç”Ÿ':'ç«','åˆ':'å·±','å†²':'åºš'}),
    'ä¹™':bidict({'ç”²':'åŠ«', "ä¹™":'æ¯”', "ä¸™":'ä¼¤', "ä¸":'é£Ÿ', "æˆŠ":'è´¢',
                  "å·±":'æ‰', "åºš":'å®˜', "è¾›":'æ€', "å£¬":'å°',"ç™¸":'æ­', "å­":'ç—…', 
                  "ä¸‘":'è¡°', "å¯…":'å¸', "å¯":'å»º', "è¾°":'å† ', "å·³":'æ²', "åˆ":'é•¿',
                  "æœª":'å…»', "ç”³":'èƒ', "é…‰":'ç»', "æˆŒ":'å¢“', "äº¥":'æ­»', 'åº“':'æœª_',
                  'æœ¬':'æœ¨', 'å…‹':'åœŸ', 'è¢«å…‹':'é‡‘', 'ç”Ÿæˆ‘':'æ°´', 'ç”Ÿ':'ç«','åˆ':'åºš','å†²':'è¾›'}),
    'ä¸™':bidict({'ä¸™':'æ¯”', "ä¸":'åŠ«', "æˆŠ":'é£Ÿ', "å·±":'ä¼¤', "åºš":'æ‰',
                  "è¾›":'è´¢', "å£¬":'æ€', "ç™¸":'å®˜', "ç”²":'æ­', "ä¹™":'å°',"å­":'èƒ', 
                  "ä¸‘":'å…»', "å¯…":'é•¿', "å¯":'æ²', "è¾°":'å† ', "å·³":'å»º', "åˆ":'å¸',
                  "æœª":'è¡°', "ç”³":'ç—…', "é…‰":'æ­»', "æˆŒ":'å¢“', "äº¥":'ç»', 'åº“':'æˆŒ_',
                  'æœ¬':'ç«', 'å…‹':'é‡‘', 'è¢«å…‹':'æ°´', 'ç”Ÿæˆ‘':'æœ¨', 'ç”Ÿ':'åœŸ','åˆ':'è¾›','å†²':'å£¬'}),
    'ä¸':bidict({'ä¸™':'åŠ«', "ä¸":'æ¯”', "æˆŠ":'ä¼¤', "å·±":'é£Ÿ', "åºš":'è´¢',
                  "è¾›":'æ‰', "å£¬":'å®˜', "ç™¸":'æ€', "ç”²":'å°',"ä¹™":'æ­', "å­":'ç»', 
                  "ä¸‘":'å¢“', "å¯…":'æ­»', "å¯":'ç—…', "è¾°":'è¡°', "å·³":'å¸', "åˆ":'å»º',
                  "æœª":'å† ', "ç”³":'æ²', "é…‰":'é•¿', "æˆŒ":'å…»', "äº¥":'èƒ', 'åº“':'æˆŒ_',
                  'æœ¬':'ç«', 'å…‹':'é‡‘', 'è¢«å…‹':'æ°´', 'ç”Ÿæˆ‘':'æœ¨', 'ç”Ÿ':'åœŸ','åˆ':'å£¬','å†²':'ç™¸'}),
    'æˆŠ':bidict({'æˆŠ':'æ¯”', "å·±":'åŠ«', "åºš":'é£Ÿ', "è¾›":'ä¼¤', "å£¬":'æ‰',
                  "ç™¸":'è´¢', "ç”²":'æ€', "ä¹™":'å®˜', "ä¸™":'æ­', "ä¸":'å°',"å­":'èƒ', 
                  "ä¸‘":'å…»', "å¯…":'é•¿', "å¯":'æ²', "è¾°":'å† ', "å·³":'å»º', "åˆ":'å¸',
                  "æœª":'è¡°', "ç”³":'ç—…', "é…‰":'æ­»', "æˆŒ":'å¢“', "äº¥":'ç»', 'åº“':'è¾°_',
                  'æœ¬':'åœŸ', 'å…‹':'æ°´', 'è¢«å…‹':'æœ¨', 'ç”Ÿæˆ‘':'ç«', 'ç”Ÿ':'é‡‘','åˆ':'ç™¸','å†²':''}),
    'å·±':bidict({'æˆŠ':'åŠ«', "å·±":'æ¯”', "åºš":'ä¼¤', "è¾›":'é£Ÿ', "å£¬":'è´¢',
                  "ç™¸":'æ‰', "ç”²":'å®˜', "ä¹™":'æ€', "ä¸™":'å°',"ä¸":'æ­',"å­":'ç»', 
                  "ä¸‘":'å¢“', "å¯…":'æ­»', "å¯":'ç—…', "è¾°":'è¡°', "å·³":'å¸', "åˆ":'å»º',
                  "æœª":'å† ', "ç”³":'æ²', "é…‰":'é•¿', "æˆŒ":'å…»', "äº¥":'èƒ', 'åº“':'è¾°_',
                  'æœ¬':'åœŸ', 'å…‹':'æ°´', 'è¢«å…‹':'æœ¨', 'ç”Ÿæˆ‘':'ç«', 'ç”Ÿ':'é‡‘','åˆ':'ç”²','å†²':''}),
    'åºš':bidict({'åºš':'æ¯”', "è¾›":'åŠ«', "å£¬":'é£Ÿ', "ç™¸":'ä¼¤', "ç”²":'æ‰',
                  "ä¹™":'è´¢', "ä¸™":'æ€', "ä¸":'å®˜', "æˆŠ":'æ­', "å·±":'å°',"å­":'æ­»', 
                  "ä¸‘":'å¢“', "å¯…":'ç»', "å¯":'èƒ', "è¾°":'å…»', "å·³":'é•¿', "åˆ":'æ²',
                  "æœª":'å† ', "ç”³":'å»º', "é…‰":'å¸', "æˆŒ":'è¡°', "äº¥":'ç—…', 'åº“':'ä¸‘_',
                  'æœ¬':'é‡‘', 'å…‹':'æœ¨', 'è¢«å…‹':'ç«', 'ç”Ÿæˆ‘':'åœŸ', 'ç”Ÿ':'æ°´','åˆ':'ä¹™','å†²':'ç”²'}), 
    'è¾›':bidict({'åºš':'åŠ«', "è¾›":'æ¯”', "å£¬":'ä¼¤', "ç™¸":'é£Ÿ', "ç”²":'è´¢',
                  "ä¹™":'æ‰', "ä¸™":'å®˜', "ä¸":'æ€', "æˆŠ":'å°', "å·±":'æ­', "å­":'é•¿', 
                  "ä¸‘":'å…»', "å¯…":'èƒ', "å¯":'ç»', "è¾°":'å¢“', "å·³":'æ­»', "åˆ":'ç—…',
                  "æœª":'è¡°', "ç”³":'å¸', "é…‰":'å»º', "æˆŒ":'å† ', "äº¥":'æ²', 'åº“':'ä¸‘_',
                  'æœ¬':'é‡‘', 'å…‹':'æœ¨', 'è¢«å…‹':'ç«', 'ç”Ÿæˆ‘':'åœŸ', 'ç”Ÿ':'æ°´','åˆ':'ä¸™','å†²':'ä¹™'}),
    'å£¬':bidict({'å£¬':'æ¯”', "ç™¸":'åŠ«', "ç”²":'é£Ÿ', "ä¹™":'ä¼¤', "ä¸™":'æ‰',
                  "ä¸":'è´¢', "æˆŠ":'æ€', "å·±":'å®˜', "åºš":'æ­', "è¾›":'å°',"å­":'å¸', 
                  "ä¸‘":'è¡°', "å¯…":'ç—…', "å¯":'æ­»', "è¾°":'å¢“', "å·³":'ç»', "åˆ":'èƒ',
                  "æœª":'å…»', "ç”³":'é•¿', "é…‰":'æ²', "æˆŒ":'å† ', "äº¥":'å»º', 'åº“':'è¾°_',
                  'æœ¬':'æ°´', 'å…‹':'ç«', 'è¢«å…‹':'åœŸ', 'ç”Ÿæˆ‘':'é‡‘', 'ç”Ÿ':'æœ¨','åˆ':'ä¸','å†²':'ä¸™'}),
    'ç™¸':bidict({'å£¬':'åŠ«', "ç™¸":'æ¯”', "ç”²":'ä¼¤', "ä¹™":'é£Ÿ', "ä¸™":'è´¢',
                  "ä¸":'æ‰', "æˆŠ":'å®˜', "å·±":'æ€', "åºš":'å°',"è¾›":'æ­', "å­":'å»º', 
                  "ä¸‘":'å† ', "å¯…":'æ²', "å¯":'é•¿', "è¾°":'å…»', "å·³":'èƒ', "åˆ":'ç»',
                  "æœª":'å¢“', "ç”³":'æ­»', "é…‰":'ç—…', "æˆŒ":'è¡°', "äº¥":'å¸', 'åº“':'è¾°_',
                  'æœ¬':'æ°´', 'å…‹':'ç«', 'è¢«å…‹':'åœŸ', 'ç”Ÿæˆ‘':'é‡‘', 'ç”Ÿ':'æœ¨','åˆ':'æˆŠ','å†²':'ä¸'}), 

}

zhi_atts = {
    "å­":{"å†²":"åˆ", "åˆ‘":"å¯", "è¢«åˆ‘":"å¯", "åˆ":("ç”³","è¾°"), "ä¼š":("äº¥","ä¸‘"), 'å®³':'æœª', 'ç ´':'é…‰', "å…­":"ä¸‘","æš—":"",},
    "ä¸‘":{"å†²":"æœª", "åˆ‘":"æˆŒ", "è¢«åˆ‘":"æœª", "åˆ":("å·³","é…‰"), "ä¼š":("å­","äº¥"), 'å®³':'åˆ', 'ç ´':'è¾°', "å…­":"å­","æš—":"å¯…",},
    "å¯…":{"å†²":"ç”³", "åˆ‘":"å·³", "è¢«åˆ‘":"ç”³", "åˆ":("åˆ","æˆŒ"), "ä¼š":("å¯","è¾°"), 'å®³':'å·³', 'ç ´':'äº¥', "å…­":"äº¥","æš—":"ä¸‘",},
    "å¯":{"å†²":"é…‰", "åˆ‘":"å­", "è¢«åˆ‘":"å­", "åˆ":("æœª","äº¥"), "ä¼š":("å¯…","è¾°"), 'å®³':'è¾°', 'ç ´':'åˆ', "å…­":"æˆŒ","æš—":"ç”³",},
    "è¾°":{"å†²":"æˆŒ", "åˆ‘":"è¾°", "è¢«åˆ‘":"è¾°", "åˆ":("å­","ç”³"), "ä¼š":("å¯…","å¯"), 'å®³':'å¯', 'ç ´':'ä¸‘', "å…­":"é…‰","æš—":"",},
    "å·³":{"å†²":"äº¥", "åˆ‘":"ç”³", "è¢«åˆ‘":"å¯…", "åˆ":("é…‰","ä¸‘"), "ä¼š":("åˆ","æœª"), 'å®³':'å¯…', 'ç ´':'ç”³', "å…­":"ç”³","æš—":"",},
    "åˆ":{"å†²":"å­", "åˆ‘":"åˆ", "è¢«åˆ‘":"åˆ", "åˆ":("å¯…","æˆŒ"), "ä¼š":("å·³","æœª"), 'å®³':'ä¸‘', 'ç ´':'å¯', "å…­":"æœª","æš—":"äº¥",},
    "æœª":{"å†²":"ä¸‘", "åˆ‘":"ä¸‘", "è¢«åˆ‘":"æˆŒ", "åˆ":("å¯","äº¥"), "ä¼š":("å·³","åˆ"), 'å®³':'å­', 'ç ´':'æˆŒ', "å…­":"åˆ","æš—":"",},
    "ç”³":{"å†²":"å¯…", "åˆ‘":"å¯…", "è¢«åˆ‘":"å·³", "åˆ":("å­","è¾°"), "ä¼š":("é…‰","æˆŒ"), 'å®³':'äº¥', 'ç ´':'å·³', "å…­":"å·³","æš—":"å¯",},
    "é…‰":{"å†²":"å¯", "åˆ‘":"é…‰", "è¢«åˆ‘":"é…‰", "åˆ":("å·³","ä¸‘"), "ä¼š":("ç”³","æˆŒ"), 'å®³':'æˆŒ', 'ç ´':'å­', "å…­":"è¾°","æš—":"",},
    "æˆŒ":{"å†²":"è¾°", "åˆ‘":"æœª", "è¢«åˆ‘":"ä¸‘", "åˆ":("åˆ","å¯…"), "ä¼š":("ç”³","é…‰"), 'å®³':'é…‰', 'ç ´':'æœª', "å…­":"å¯","æš—":"",},
    "äº¥":{"å†²":"å·³", "åˆ‘":"äº¥", "è¢«åˆ‘":"äº¥", "åˆ":("å¯","æœª"), "ä¼š":("å­","ä¸‘"), 'å®³':'ç”³', 'ç ´':'å¯…', "å…­":"å¯…","æš—":"åˆ",},
}

empties = {
    ('ç”²', 'å­'): ('æˆŒ','äº¥'), ('ä¹™', 'ä¸‘'):('æˆŒ','äº¥'), 
    ('ä¸™', 'å¯…'): ('æˆŒ','äº¥'), ('ä¸', 'å¯'): ('æˆŒ','äº¥'), 
    ('æˆŠ', 'è¾°'): ('æˆŒ','äº¥'), ('å·±', 'å·³'): ('æˆŒ','äº¥'),
    ('åºš', 'åˆ'): ('æˆŒ','äº¥'), ('è¾›', 'æœª'): ('æˆŒ','äº¥'),
    ('å£¬', 'ç”³'): ('æˆŒ','äº¥'), ('ç™¸', 'é…‰'): ('æˆŒ','äº¥'),

    ('ç”²', 'æˆŒ'): ('ç”³','é…‰'), ('ä¹™', 'äº¥'): ('ç”³','é…‰'),
    ('ä¸™', 'å­'): ('ç”³','é…‰'), ('ä¸', 'ä¸‘'): ('ç”³','é…‰'),
    ('æˆŠ', 'å¯…'): ('ç”³','é…‰'), ('å·±', 'å¯'): ('ç”³','é…‰'),
    ('åºš', 'è¾°'):('ç”³','é…‰'), ('è¾›', 'å·³'): ('ç”³','é…‰'),
    ('å£¬', 'åˆ'): ('ç”³','é…‰'), ('ç™¸', 'æœª'): ('ç”³','é…‰'),

    ('ç”²', 'ç”³'): ('åˆ','æœª'), ('ä¹™', 'é…‰'): ('åˆ','æœª'),
    ('ä¸™', 'æˆŒ'): ('åˆ','æœª'), ('ä¸', 'äº¥'): ('åˆ','æœª'),
    ('æˆŠ', 'å­'): ('åˆ','æœª'), ('å·±', 'ä¸‘'): ('åˆ','æœª'), 
    ('åºš', 'å¯…'): ('åˆ','æœª'), ('è¾›', 'å¯'): ('åˆ','æœª'),
    ('å£¬', 'è¾°'): ('åˆ','æœª'), ('ç™¸', 'å·³'): ('åˆ','æœª'),

    ('ç”²', 'åˆ'): ('è¾°','å·±'), ('ä¹™', 'æœª'): ('è¾°','å·±'),
    ('ä¸™', 'ç”³'): ('è¾°','å·±'), ('ä¸', 'é…‰'): ('è¾°','å·±'),
    ('æˆŠ', 'æˆŒ'): ('è¾°','å·±'), ('å·±', 'äº¥'): ('è¾°','å·±'),
    ('åºš', 'å­'): ('è¾°','å·±'), ('è¾›', 'ä¸‘'): ('è¾°','å·±'),
    ('å£¬', 'å¯…'): ('è¾°','å·±'), ('ç™¸', 'å¯'): ('è¾°','å·±'),

    ('ç”²', 'è¾°'): ('å¯…','å¯'), ('ä¹™', 'å·³'): ('å¯…','å¯'),
    ('ä¸™', 'åˆ'): ('å¯…','å¯'), ('ä¸', 'æœª'): ('å¯…','å¯'),
    ('æˆŠ', 'ç”³'): ('å¯…','å¯'), ('å·±', 'é…‰'): ('å¯…','å¯'),
    ('åºš', 'æˆŒ'): ('å¯…','å¯'), ('è¾›', 'äº¥'): ('å¯…','å¯'),
    ('å£¬', 'å­'): ('å¯…','å¯'), ('ç™¸', 'ä¸‘'): ('å¯…','å¯'), 


    ('ç”²', 'å¯…'): ('å­','ä¸‘'), ('ä¹™', 'å¯'): ('å­','ä¸‘'),     
    ('ä¸™', 'è¾°'): ('å­','ä¸‘'), ('ä¸', 'å·³'): ('å­','ä¸‘'), 
    ('æˆŠ', 'åˆ'): ('å­','ä¸‘'), ('å·±', 'æœª'): ('å­','ä¸‘'),
    ('åºš', 'ç”³'): ('å­','ä¸‘'), ('è¾›', 'é…‰'): ('å­','ä¸‘'), 
    ('å£¬', 'æˆŒ'): ('å­','ä¸‘'), ('ç™¸', 'äº¥'): ('å­','ä¸‘'),    
}
year_shens = {
    'å­¤è¾°':{"å­":"å¯…", "ä¸‘":"å¯…", "å¯…":"å·³", "å¯":"å·³", "è¾°":"å·³", "å·³":"ç”³", 
              "åˆ":"ç”³", "æœª":"ç”³", "ç”³":"äº¥", "é…‰":"äº¥", "æˆŒ":"äº¥", "äº¥":"å¯…"},
    'å¯¡å®¿':{"å­":"æˆŒ", "ä¸‘":"æˆŒ", "å¯…":"ä¸‘", "å¯":"ä¸‘", "è¾°":"ä¸‘", "å·³":"è¾°", 
              "åˆ":"è¾°", "æœª":"è¾°", "ç”³":"æœª", "é…‰":"æœª", "æˆŒ":"æœª", "äº¥":"æˆŒ"},   
    'å¤§è€—':{"å­":"å·³æœª", "ä¸‘":"åˆç”³", "å¯…":"æœªé…‰", "å¯":"ç”³æˆŒ", "è¾°":"é…‰äº¥", "å·³":"æˆŒå­", 
              "åˆ":"äº¥ä¸‘", "æœª":"å­å¯…", "ç”³":"ä¸‘å¯", "é…‰":"å¯…è¾°", "æˆŒ":"å¯å·³", "äº¥":"è¾°åˆ"},      
}

month_shens = {
    'å¤©å¾·':{"å­":"å·³", "ä¸‘":"åºš", "å¯…":"ä¸", "å¯":"ç”³", "è¾°":"å£¬", "å·³":"è¾›", 
            "åˆ":"äº¥", "æœª":"ç”²", "ç”³":"ç™¸", "é…‰":"å¯…", "æˆŒ":"ä¸™", "äº¥":"ä¹™"},
    'æœˆå¾·':{"å­":"å£¬", "ä¸‘":"åºš", "å¯…":"ä¸™", "å¯":"ç”²", "è¾°":"å£¬", "å·³":"åºš", 
              "åˆ":"ä¸™", "æœª":"ç”²", "ç”³":"å£¬", "é…‰":"åºš", "æˆŒ":"ä¸™", "äº¥":"ç”²"},
}
    

day_shens = { 
    'å°†æ˜Ÿ':{"å­":"å­", "ä¸‘":"é…‰", "å¯…":"åˆ", "å¯":"å¯", "è¾°":"å­", "å·³":"é…‰", 
              "åˆ":"åˆ", "æœª":"å¯", "ç”³":"å­", "é…‰":"é…‰", "æˆŒ":"åˆ", "äº¥":"å¯"},      
    'åç›–':{"å­":"è¾°", "ä¸‘":"ä¸‘", "å¯…":"æˆŒ", "å¯":"æœª", "è¾°":"è¾°", "å·³":"ä¸‘", 
              "åˆ":"æˆŒ", "æœª":"æœª", "ç”³":"è¾°", "é…‰":"ä¸‘", "æˆŒ":"æˆŒ", "äº¥":"æœª"}, 
    'é©¿é©¬': {"å­":"å¯…", "ä¸‘":"äº¥", "å¯…":"ç”³", "å¯":"å·³", "è¾°":"å¯…", "å·³":"äº¥", 
            "åˆ":"ç”³", "æœª":"å·³", "ç”³":"å¯…", "é…‰":"äº¥", "æˆŒ":"ç”³", "äº¥":"å·³"},
    'åŠ«ç…': {"å­":"å·³", "ä¸‘":"å¯…", "å¯…":"äº¥", "å¯":"ç”³", "è¾°":"å·³", "å·³":"å¯…", 
         "åˆ":"äº¥", "æœª":"ç”³", "ç”³":"å·³", "é…‰":"å¯…", "æˆŒ":"äº¥", "äº¥":"ç”³"},
    'äº¡ç¥': {"å­":"äº¥", "ä¸‘":"ç”³", "å¯…":"å·³", "å¯":"å¯…", "è¾°":"äº¥", "å·³":"ç”³", 
            "åˆ":"å·³", "æœª":"å¯…", "ç”³":"äº¥", "é…‰":"ç”³", "æˆŒ":"å·³", "äº¥":"å¯…"},    
    'æ¡ƒèŠ±': {"å­":"é…‰", "ä¸‘":"åˆ", "å¯…":"å¯", "å¯":"å­", "è¾°":"é…‰", "å·³":"åˆ", 
            "åˆ":"å¯", "æœª":"å­", "ç”³":"é…‰", "é…‰":"åˆ", "æˆŒ":"å¯", "äº¥":"å­"},        
}
g_shens = {
    'å¤©ä¹™':{"ç”²":'æœªä¸‘',  "ä¹™":"ç”³å­", "ä¸™":"é…‰äº¥", "ä¸":"é…‰äº¥", "æˆŠ":'æœªä¸‘', "å·±":"ç”³å­", 
            "åºš": "æœªä¸‘", "è¾›":"å¯…åˆ", "å£¬": "å¯å·³", "ç™¸":"å¯å·³"},
    'æ–‡æ˜Œ':{"ç”²":'å·³', "ä¹™":"åˆ", "ä¸™":"ç”³", "ä¸":"é…‰", "æˆŠ":"ç”³", "å·±":"é…‰", 
            "åºš": "äº¥", "è¾›":"å­", "å£¬": "å¯…", "ç™¸":"ä¸‘"},   
    'é˜³åˆƒ':{"ç”²":'å¯', "ä¹™":"", "ä¸™":"åˆ", "ä¸":"", "æˆŠ":"åˆ", "å·±":"", 
            "åºš": "é…‰", "è¾›":"", "å£¬": "å­", "ç™¸":""},     
    'çº¢è‰³':{"ç”²":'åˆ', "ä¹™":"åˆ", "ä¸™":"å¯…", "ä¸":"æœª", "æˆŠ":"è¾°", "å·±":"è¾°", 
            "åºš": "æˆŒ", "è¾›":"é…‰", "å£¬": "å­", "ç™¸":"ç”³"},       
}
sx_xingge = {
    'é¼ ':"åšäº‹æ€åº¦ç§¯æï¼Œå‹¤å¥‹åŠªåŠ›ï¼Œå¤´è„‘æœºæ™ºæ‰‹è„šçµå·§ï¼›å¾…äººå’Œè”¼ï¼Œæœ‰è‡ªæˆ‘çº¦æŸåŠ›ï¼Œé‡äº‹èƒ½æ›¿äººç€æƒ³ï¼›é€‚åº”æ€§å¼ºï¼Œå–„äºç»“äº¤å„æ–¹é¢çš„æœ‹å‹ï¼›å¤šæƒ…å–„æ„Ÿï¼Œæ€§æ ¼ç¨å¾®å†…å‘ï¼Œè¡ŒåŠ¨ä¸Šæ´»æ³¼ï¼Œå¾…äººçƒ­æƒ…ï¼›è§‚å¯Ÿç»†è‡´ï¼Œæ€ç»´æ–¹å¼æœ‰æ¡ç†ï¼›ç¨å¾®èƒ†å°æ€•äº‹ï¼Œå¤šç–‘ä¿å®ˆï¼Œä¸ªåˆ«é—®é¢˜ä¸Šçº¦æ˜¾ç›®å…‰çŸ­æµ…ï¼Œè®¤è¯†æ·±åº¦ä¸å¤Ÿã€‚",
    'ç‰›':"""å‹¤å¥‹åŠªåŠ›ï¼Œæœ‰å¼ºçƒˆçš„è¿›å–å¿ƒï¼›å¿ åšè€å®ï¼ŒåŠ¡å®ï¼Œè´£ä»»å¿ƒå¼ºï¼Œæœ‰è€åŠ›ï¼›æœ‰æ­£ä¹‰æ„Ÿï¼Œçˆ±æ‰“æŠ±ä¸å¹³ï¼›å‹¤ä¿­æŒå®¶ï¼Œç¨³å®šï¼›ç¨å¾®å›ºæ‰§å·²è§ï¼Œç¼ºä¹é€šèï¼› æœ‰æ—¶é’»"ç‰›è§’å°–"ä¸»è§‚ç‹¬æ–­ã€‚""",
    'è™':"""æœ‰æœæ°”ï¼Œæœ‰é›„å¿ƒå£®å¿—ï¼›æ•¢æƒ³æ•¢å¹²ï¼Œå‹‡äºå¼€æ‹“ï¼›çƒ­æƒ…å¤§æ–¹ï¼Œé¡½å¼ºè‡ªä¿¡ï¼Œåˆšæ„è‡ªç”¨ï¼›æœ‰æ­£ä¹‰æ„Ÿï¼Œä¹äºåŠ©äººï¼›æ˜“åŠ¨æ„Ÿæƒ…ï¼Œè‡ªä»¥ä¸ºæ˜¯ï¼Œç¨å¾®æœ‰ç‚¹å­¤å‚²ä»»æ€§ã€‚""",
    'å…”':"æ¸©æŸ”ã€å–„è‰¯ã€ä¹è§‚ï¼Œæ„Ÿæƒ…ç»†è…»ï¼›ç²¾æ˜çµæ´»ï¼Œä½“è°…ä»–äººï¼›æ°”è´¨é«˜é›…ï¼Œæ€ç»´ç»†è…»ï¼›èƒ½å¿è€è°¦è®©ï¼Œä¸å¥½äº‰æ‰§ï¼›çº¦æœ‰è™šè£å¿ƒï¼Œæ€§æƒ…æœ‰æ—¶å€™ä¸ç¨³å®šï¼Œå®¹æ˜“æ€¥èºï¼Œæ»¡è¶³äºç°çŠ¶çš„æ—¶å€™å¤šã€‚",
    'é¾™':"å‹‡å¾€ç›´å‰ï¼Œæœ‰æ—ºç››çš„è¿›å–å¿ƒï¼›ä¸“å¿ƒè‡´å¿—ï¼Œæœæ–­è‚¯å¹²ï¼›å­é¡ºï¼Œæ…·æ…¨ï¼Œå–„äºç†è´¢ï¼›èªæ˜ï¼Œæœ‰æ‰èƒ½ï¼Œæ°”åº¦é«˜ï¼›æœ‰æ—¶å®¹æ˜“æ€¥èºï¼Œç››æ°”å‡Œäººï¼Œä¸»è§‚å›ºæ‰§ï¼Œçº¦æ˜¾äº‰å¼ºå¥½èƒœï¼Œä¸æœè¾“ã€‚",
    'è›‡':"""ä¸“å¿ƒè‡´å¿—ï¼Œè®¤çœŸè´Ÿè´£ï¼›å¿ƒçµæ‰‹å·§ï¼Œæ€è·¯æ•æ·ï¼›ç²¾åŠ›å……æ²›ï¼Œéšå’Œå¼€æœ—ï¼›è¡¨é¢æ²‰ç€ï¼Œæœ‰æ—¶å£å¿«ï¼›æœ‰æ—¶åŠ¨æ‘‡ä¸å®šï¼Œå¿ƒèƒ¸ç‹­çª„ï¼Œæœ‰æ—¶é’»"ç‰›è§’å°–"ï¼Œæ€§æƒ…å¤šç–‘ï¼Œä¸å¤ªä¿¡ä»»ä»–äººã€‚""",
    'é©¬':"ç²¾åŠ›æ—ºç››ï¼Œåˆšæ¯…æœæ–­ï¼›å–„æ¶åˆ†æ˜ï¼Œè€¿ç›´çƒ­æƒ…ï¼›èƒ½è¨€å–„è¾©ï¼Œä¸æ€•å›°éš¾ï¼Œå‹‡å¾€ç›´å‰ï¼›æ¬ ç¼ºå†·é™æœ‰æ—¶æ€¥èºï¼Œä¸ªæ€§çº¦ä¸ºå€”å¼ºã€‚",
    'ç¾Š':"ç ”ç©¶æ¬²å¼ºï¼Œå¯Œæœ‰åˆ›é€ æ€§ï¼›å–„è‰¯ã€å®½å®¹ã€é¡ºä»ï¼›æœ‰è€å¿ƒï¼Œä¸æƒ¹æ˜¯éï¼Œé€‚åº”ç¯å¢ƒå¿«ï¼›æ˜“åŠ¨æ„Ÿæƒ…ï¼Œä¸»è§‚æ€§å·®ï¼Œéšæ³¢é€æµä¼˜æŸ”å¯¡æ–­ã€‚",
    'çŒ´':"æœ‰è¿›å–å¿ƒï¼Œå–œæ¬¢ç«äº‰ï¼›å¤šæ‰å¤šè‰ºï¼Œå¤šé¢æ‰‹ï¼›ç•¥æœ‰è™šè£å¿ƒï¼Œç”Ÿæ´»æµªæ¼«ï¼Œä¸å—æ‹˜æŸï¼›èƒ½ä¸äººèæ´½ç›¸å¤„ï¼Œå–„äºåº”é…¬ï¼›æœ‰å«‰å¦’å¿ƒï¼Œè½»æµ®æ•£æ¼«ï¼Œæ€§æƒ…å¤šå˜ï¼Œçº¦ç¼ºè¯šä¿¡ã€‚",
    'é¸¡':"ç²¾åŠ›å……æ²›ï¼Œå–„äºè¨€è°ˆï¼›è°ƒæŸ¥ç ”ç©¶ï¼Œè®²ç©¶æ•ˆç‡ï¼›æœæ–­ã€æ•é”ã€å¥½è¡¨ç°è‡ªå·±ï¼›å‹‡å¾€ç›´å‰ï¼Œå¿ƒå¼ºå¥½èƒœï¼Œæ€»æƒ³ä¸€é¸£æƒŠäººï¼›è„¾æ°”å¤æ€ªï¼Œçˆ±äº‰å–„è¾©ï¼Œå›ºæ‰§å·²è§ï¼Œç¨å¾®è‡ªç§ã€‚",
    'ç‹—':"æ„å¿—åšå®šï¼Œå¿ å®å¯é ï¼›æ­£ä¹‰ã€å…¬å¹³ã€æ•æ·ï¼›èªæ˜ã€æœ‰è§è¯†ï¼Œæœ‰æ¡ç†ï¼›å—äººæ‰€ç”¨ï¼Œèƒ½å¬è¯åƒè‹¦ï¼Œæ³¨é‡ç°å®ï¼›æœ‰æ—¶æ€¥èºï¼Œæœ‰ç›²ç›®å€¾å‘ï¼Œé¡½å›ºï¼Œä¸è®¡åæœï¼Œé˜²æ­¢è¢«äººå› å°åˆ©è€Œäº¡å¤§ä¹‰ã€‚",
    'çŒª':"çœŸæŒšã€è¯šå®ã€æœ‰åŒæƒ…å¿ƒï¼›ç²¾åŠ›æ—ºç››ï¼Œå¾…äººè¯šå®ï¼›ä¸“å¿ƒè‡´å¿—ï¼Œå‡¡äº‹çƒ­å¿ƒï¼›ä¿¡ä»»åˆ«äººï¼Œå¼€æœ—ä¹è§‚ï¼›æ˜“åŠ¨æ„Ÿæƒ…ï¼Œå›ºæ‰§ä¿å®ˆï¼Œç›®å…‰çŸ­æµ…ï¼Œæœ‰æ—¶è„¾æ°”ä¸ç¨³ã€‚" 
}

nayins = {
    ('ç”²', 'å­'): 'æµ·ä¸­é‡‘', ('ä¹™', 'ä¸‘'): 'æµ·ä¸­é‡‘', ('å£¬', 'å¯…'): 'é‡‘æ³Šé‡‘', ('ç™¸', 'å¯'): 'é‡‘æ³Šé‡‘',
    ('åºš', 'è¾°'): 'ç™½èœ¡é‡‘', ('è¾›', 'å·³'): 'ç™½èœ¡é‡‘', ('ç”²', 'åˆ'): 'ç ‚ä¸­é‡‘', ('ä¹™', 'æœª'): 'ç ‚ä¸­é‡‘',
    ('å£¬', 'ç”³'): 'å‰‘é”‹é‡‘', ('ç™¸', 'é…‰'): 'å‰‘é”‹é‡‘', ('åºš', 'æˆŒ'): 'é’—é’é‡‘', ('è¾›', 'äº¥'): 'é’—é’é‡‘',
    ('æˆŠ', 'å­'): 'éœ¹é›³ç«', ('å·±', 'ä¸‘'): 'éœ¹é›³ç«', ('ä¸™', 'å¯…'): 'ç‚‰ä¸­ç«', ('ä¸', 'å¯'): 'ç‚‰ä¸­ç«',
    ('ç”²', 'è¾°'): 'è¦†ç¯ç«', ('ä¹™', 'å·³'): 'è¦†ç¯ç«', ('æˆŠ', 'åˆ'): 'å¤©ä¸Šç«', ('å·±', 'æœª'): 'å¤©ä¸Šç«',
    ('ä¸™', 'ç”³'): 'å±±ä¸‹ç«', ('ä¸', 'é…‰'): 'å±±ä¸‹ç«', ('ç”²', 'æˆŒ'): 'å±±å¤´ç«', ('ä¹™', 'äº¥'): 'å±±å¤´ç«',
    ('å£¬', 'å­'): 'æ¡‘æŸ˜æœ¨', ('ç™¸', 'ä¸‘'): 'æ¡‘æŸ˜æœ¨', ('åºš', 'å¯…'): 'æ¾æŸæœ¨', ('è¾›', 'å¯'): 'æ¾æŸæœ¨',
    ('æˆŠ', 'è¾°'): 'å¤§æ—æœ¨', ('å·±', 'å·³'): 'å¤§æ—æœ¨', ('å£¬', 'åˆ'): 'æ¨æŸ³æœ¨', ('ç™¸', 'æœª'): 'æ¨æŸ³æœ¨',
    ('åºš', 'ç”³'): 'çŸ³æ¦´æœ¨', ('è¾›', 'é…‰'): 'çŸ³æ¦´æœ¨', ('æˆŠ', 'æˆŒ'): 'å¹³åœ°æœ¨', ('å·±', 'äº¥'): 'å¹³åœ°æœ¨',
    ('åºš', 'å­'): 'å£ä¸ŠåœŸ', ('è¾›', 'ä¸‘'): 'å£ä¸ŠåœŸ', ('æˆŠ', 'å¯…'): 'åŸå¤´åœŸ', ('å·±', 'å¯'): 'åŸå¤´åœŸ',
    ('ä¸™', 'è¾°'): 'ç ‚ä¸­åœŸ', ('ä¸', 'å·³'): 'ç ‚ä¸­åœŸ', ('åºš', 'åˆ'): 'è·¯æ—åœŸ', ('è¾›', 'æœª'): 'è·¯æ—åœŸ',
    ('æˆŠ', 'ç”³'): 'å¤§é©¿åœŸ', ('å·±', 'é…‰'): 'å¤§é©¿åœŸ', ('ä¸™', 'æˆŒ'): 'å±‹ä¸ŠåœŸ', ('ä¸', 'äº¥'): 'å±‹ä¸ŠåœŸ',
    ('ä¸™', 'å­'): 'æ¶§ä¸‹æ°´', ('ä¸', 'ä¸‘'): 'æ¶§ä¸‹æ°´', ('ç”²', 'å¯…'): 'å¤§æºªæ°´', ('ä¹™', 'å¯'): 'å¤§æºªæ°´',
    ('å£¬', 'è¾°'): 'é•¿æµæ°´', ('ç™¸', 'å·³'): 'é•¿æµæ°´', ('ä¸™', 'åˆ'): 'å¤©æ²³æ°´', ('ä¸', 'æœª'): 'å¤©æ²³æ°´',
    ('ç”²', 'ç”³'): 'äº•æ³‰æ°´', ('ä¹™', 'é…‰'): 'äº•æ³‰æ°´', ('å£¬', 'æˆŒ'): 'å¤§æµ·æ°´', ('ç™¸', 'äº¥'): 'å¤§æµ·æ°´',    
}
gong_he = {"ç”³è¾°": 'å­', "å·³ä¸‘": 'é…‰', "å¯…æˆŒ": 'åˆ', "äº¥æœª": 'å¯',
           "è¾°ç”³": 'å­', "ä¸‘å·³": 'é…‰', "æˆŒå¯…": 'åˆ', "æœªäº¥": 'å¯',}
def remove_brackets_content(sentence):
    import re
    # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…"ã€ã€‘"åŠå…¶å†…éƒ¨çš„å†…å®¹ï¼Œå¹¶å°†å…¶æ›¿æ¢ä¸ºç©º
    new_sentence = re.sub(r'ã€.*?ã€‘', '', sentence)
    return new_sentence

def get_second_bracket_value(s):
    # æ‰¾åˆ°ç¬¬ä¸€ä¸ªå·¦èŠ±æ‹¬å·çš„ç´¢å¼•
    start_index = s.find('{') + 1
    # æ‰¾åˆ°ç¬¬ä¸€ä¸ªå³èŠ±æ‹¬å·çš„ç´¢å¼•
    end_index = s.find('}')
    # æ‰¾åˆ°ç¬¬äºŒä¸ªå·¦èŠ±æ‹¬å·çš„ç´¢å¼•
    second_start_index = s.find('{', end_index) + 1
    # æ‰¾åˆ°ç¬¬äºŒä¸ªå³èŠ±æ‹¬å·çš„ç´¢å¼•
    second_end_index = s.find('}', second_start_index)
    # è¿”å›ç¬¬äºŒå¯¹èŠ±æ‹¬å·ä¸­çš„å†…å®¹
    return s[second_start_index:second_end_index]

def shishenGPT(shishen,sex):
    prompt = f"""
    ä½ æ˜¯ä¸ªç®—å‘½å¤§å¸ˆï¼Œæˆ‘ç°åœ¨ä¼šæŠŠæŸä¸ªäººçš„åç¥å‘Šè¯‰ä½ ï¼Œåç¥å¯¹åº”çš„å«ä¹‰æ˜¯:

    æ­£å®˜ï¼šæ”¿åºœã€æƒåŠ›ã€è§„åˆ™ã€æ³•å¾‹ã€‚æ­£ç›´ã€å‹¤å¥‹ã€å…‹åˆ¶ã€å®ˆä¿¡ã€‚å¥³å‘½ä¸ˆå¤«ã€å§»ç¼˜ã€‚
    ä¸ƒæ€ï¼šç–¾ç—…ã€å°äººã€è´«ç©·ã€å®˜éã€‚å¤šç–‘ã€å†²åŠ¨ã€å¥½æ–—ã€‚å¥³å‘½æƒ…äººã€‚
    æ­£å°ï¼šå­¦å†ã€è¯ä¹¦ã€è´µäººã€åœ°ä½ã€‚å–„è‰¯ã€æœ‰çˆ±å¿ƒã€æœ‰ä¿®å…»ã€‚æ¯äº²ã€‚
    åå°ï¼šå®—æ•™ã€å¤±ä¸šã€å­¦æœ¯ã€åä¸šã€‚ç²¾æ˜ã€è­¦è§‰ã€åˆ›é€ åŠ›ã€å­¤ç‹¬ã€‚ç»§æ¯ã€‚
    æ­£è´¢ï¼šé’±è´¢ã€äº‹ä¸šã€å¯Œè£•ã€å¥åº·ã€‚å‹¤ä¿­ã€ä¸“ä¸€ã€ç°å®ã€æ•æ„Ÿã€‚ç”·å‘½å¦»å­ã€å§»ç¼˜ã€‚
    åè´¢ï¼šè´¢è¿ã€å¯Œè£•ã€æ‰è‰ºã€å‰¯ä¸šã€‚è±è¾¾ã€äº¤é™…ã€é£æµã€æ‹œé‡‘ã€‚ç”·å‘½æƒ…äººã€å§»ç¼˜ã€‚
    é£Ÿç¥ï¼šå¹³å®‰ã€å£ç¦ã€æ‰è‰ºã€æ™ºæ…§ã€‚å®½å®¹ã€äººç¼˜å¥½ã€æ–¯æ–‡ã€å¥‰çŒ®ã€‚å­å¥³ã€‚
    ä¼¤å®˜ï¼šèªæ˜ã€æ‰åã€æŠ€æœ¯ã€å•†ä¸šã€‚æ‚Ÿæ€§ã€å¼ æ‰¬ã€åˆ›æ–°ã€éª„å‚²ã€‚å…‹å¤«ã€‚
    æ¯”è‚©ï¼šå…„å¼Ÿã€å…¬å¹³ã€ç«äº‰ã€ç²¾åŠ›ã€‚æ¯…åŠ›ã€å‹¤å¥‹ã€è‡ªå°Šã€æ‰§è¡ŒåŠ›ã€‚å…„å¼Ÿã€‚
    åŠ«è´¢ï¼šå®˜éã€è´«å›°ã€ç ´è´¢ã€ç–¾ç—…ã€‚äº‰æ–—ã€è‡ªæˆ‘ã€å†²åŠ¨ã€ç›´ç‡ã€‚å…‹å¦»ã€‚

    è¯·æ ¹æ®æˆ‘å‘çš„åç¥æ‰¾åˆ°å¯¹åº”çš„è§£é‡Šï¼Œç„¶åæ ¹æ®è¿™äº›è§£é‡Šç»™å‡ºæ­¤äººå‘½ç†çš„è¯¦ç»†åˆ†æï¼Œè¿”å›çš„ç­”æ¡ˆä¸èƒ½å‡ºç°åç¥çš„è§£é‡Š
    æ³¨æ„è¿”å›åœ¨100-150å­—
    æ³¨æ„æ­¤äººçš„æ€§åˆ«æ˜¯{sex}
    å›ç­”æ—¶ï¼Œå¦‚æœæ€§åˆ«æ˜¯å¥³ï¼Œç”¨å¥¹ã€‚æ€§åˆ«æ˜¯ç”·ï¼Œç”¨ä»–ã€‚
    ç”¨jsonçš„æ ¼å¼è¿”å›. æ ¼å¼ä¸º {{â€responseâ€œ:åç¥åˆ†æè§£é‡Š}}
    """
    completion = client.chat.completions.create(
        model="gpt-3.5-turbo-1106",                                          # æ¨¡å‹é€‰æ‹©GPT 3.5 Turbo
        messages=[{"role": "system", "content": prompt},
                {"role": "user", "content":f"åç¥ä¸ºï¼š{shishen}"}],
        max_tokens = 2048,
        temperature = 0,
        response_format={"type": "json_object"}

    )
    string_res = completion.choices[0].message.content.strip()
    string_res = json.loads(string_res)

    return string_res["response"]

def xinggeGPT(bazi,shishen,wuxing,sex):
    prompt = f"""
    ä½ æ˜¯ä¸ªç®—å‘½å¤§å¸ˆè´Ÿä¸»è¦è´Ÿè´£ä¸ªäººæ€§æ ¼æ¨ç†åˆ†æã€‚æˆ‘ç°åœ¨ä¼šæŠŠå…«å­—ã€äº”è¡Œã€åç¥å‘Šè¯‰ä½ ï¼Œä½ éœ€è¦ç»“åˆå…«å­—ã€äº”è¡Œã€åç¥æ¨æµ‹å‡ºæ­¤äººçš„æ€§æ ¼ã€‚
    ä¸è¦å‡ºç°äº”è¡Œçš„åˆ†ææƒ…å†µ
    ä¸è¦å‡ºç°"xxç›¸ç”Ÿç›¸å…‹"çš„åˆ†ææƒ…å†µ
    ä¸è¦å‡ºç°'æ ¹æ®å…«å­—ã€äº”è¡Œå’Œåç¥çš„ä¿¡æ¯åˆ†æ'ç­‰å­—çœ¼
    æ³¨æ„è¿”å›åœ¨100-150å­—
    æ³¨æ„æ­¤äººçš„æ€§åˆ«æ˜¯{sex}
    å›ç­”æ—¶ï¼Œå¦‚æœæ€§åˆ«æ˜¯å¥³ï¼Œç”¨å¥¹ã€‚æ€§åˆ«æ˜¯ç”·ï¼Œç”¨ä»–ã€‚
    ç”¨jsonçš„æ ¼å¼è¿”å›. æ ¼å¼ä¸º {{â€responseâ€œ:æ€§æ ¼åˆ†æ}}
    """
    completion = client.chat.completions.create(
        model="gpt-3.5-turbo-1106",                                          # æ¨¡å‹é€‰æ‹©GPT 3.5 Turbo
        messages=[{"role": "system", "content": prompt},
                {"role": "user", "content":f"å…«å­—ä¸º:{bazi}\n\näº”è¡Œä¸º:{wuxing}\n\nåç¥ä¸ºï¼š{shishen}"}],
        max_tokens = 2048,
        temperature = 0,
        response_format={"type": "json_object"}

    )
    string_res = completion.choices[0].message.content.strip()
    string_res = json.loads(string_res)

    return string_res["response"]

def caiyunGPT(bazi,shishen,wuxing,sex):
    prompt = f"""
    ä½ æ˜¯ä¸ªç®—å‘½å¤§å¸ˆè´Ÿä¸»è¦è´Ÿè´£ä¸ªäººè´¢è¿åˆ†æã€‚æˆ‘ç°åœ¨ä¼šæŠŠå…«å­—ã€äº”è¡Œã€åç¥å‘Šè¯‰ä½ ï¼Œä½ éœ€è¦ç»“åˆå…«å­—ã€äº”è¡Œã€åç¥æ¨æµ‹å‡ºæ­¤äººçš„è´¢è¿æƒ…å†µã€‚
    ä¸è¦å‡ºç°äº”è¡Œçš„åˆ†ææƒ…å†µ
    ä¸è¦å‡ºç°"xxç›¸ç”Ÿç›¸å…‹"çš„åˆ†ææƒ…å†µ
    ä¸è¦å‡ºç°'æ ¹æ®å…«å­—ã€äº”è¡Œå’Œåç¥çš„ä¿¡æ¯åˆ†æ'ç­‰å­—çœ¼
    æ³¨æ„è¿”å›åœ¨100-150å­—
    æ³¨æ„æ­¤äººçš„æ€§åˆ«æ˜¯{sex}
    å›ç­”æ—¶ï¼Œå¦‚æœæ€§åˆ«æ˜¯å¥³ï¼Œç”¨å¥¹ã€‚æ€§åˆ«æ˜¯ç”·ï¼Œç”¨ä»–ã€‚
    ç”¨jsonçš„æ ¼å¼è¿”å›. æ ¼å¼ä¸º {{â€responseâ€œ:è´¢è¿åˆ†ææƒ…å†µ}}
    """
    completion = client.chat.completions.create(
        model="gpt-3.5-turbo-1106",                                          # æ¨¡å‹é€‰æ‹©GPT 3.5 Turbo
        messages=[{"role": "system", "content": prompt},
                {"role": "user", "content":f"å…«å­—ä¸º:{bazi}\n\näº”è¡Œä¸º:{wuxing}\n\nåç¥ä¸ºï¼š{shishen}"}],
        max_tokens = 2048,
        temperature = 0,
        response_format={"type": "json_object"}

    )
    string_res = completion.choices[0].message.content.strip()
    string_res = json.loads(string_res)

    return string_res["response"]

def yinyuanGPT(bazi,shishen,wuxing,sex):
    prompt = f"""
    ä½ æ˜¯ä¸ªç®—å‘½å¤§å¸ˆè´Ÿä¸»è¦è´Ÿè´£ä¸ªäººå§»ç¼˜æƒ…å†µåˆ†æã€‚æˆ‘ç°åœ¨ä¼šæŠŠå…«å­—ã€äº”è¡Œã€åç¥å‘Šè¯‰ä½ ï¼Œä½ éœ€è¦ç»“åˆå…«å­—ã€äº”è¡Œã€åç¥æ¨æµ‹å‡ºæ­¤äººçš„å§»ç¼˜æƒ…å†µã€‚
    ä¸è¦å‡ºç°'æ ¹æ®å…«å­—å’Œåç¥çš„ä¿¡æ¯åˆ†æ'ç­‰å­—çœ¼
    ä¸è¦å‡ºç°äº”è¡Œçš„åˆ†ææƒ…å†µ
    ä¸è¦å‡ºç°"xxç›¸ç”Ÿç›¸å…‹"çš„åˆ†ææƒ…å†µ
    æ³¨æ„æ­¤äººçš„æ€§åˆ«æ˜¯{sex}
    å›ç­”æ—¶ï¼Œå¦‚æœæ€§åˆ«æ˜¯å¥³ï¼Œç”¨å¥¹ã€‚æ€§åˆ«æ˜¯ç”·ï¼Œç”¨ä»–ã€‚
    æ³¨æ„è¿”å›åœ¨100-150å­—
    ç”¨jsonçš„æ ¼å¼è¿”å›. æ ¼å¼ä¸º {{â€responseâ€œ:å§»ç¼˜åˆ†ææƒ…å†µ}}
    """
    completion = client.chat.completions.create(
        model="gpt-3.5-turbo-1106",                                          # æ¨¡å‹é€‰æ‹©GPT 3.5 Turbo
        messages=[{"role": "system", "content": prompt},
                {"role": "user", "content":f"å…«å­—ä¸º:{bazi}\n\nnäº”è¡Œä¸º:{wuxing}\n\nåç¥ä¸ºï¼š{shishen}"}],
        max_tokens = 2048,
        temperature = 0,
        response_format={"type": "json_object"}

    )
    string_res = completion.choices[0].message.content.strip()
    string_res = json.loads(string_res)

    return string_res["response"]
def mingyunGPT(bazi,mingyun,sex):
    if sex=='å¥³':
        mingyun=mingyun.replace('å¦»','å¤«')
    prompt = f"""
    ä½ æ˜¯ä¸ªç®—å‘½å¤§å¸ˆï¼Œæˆ‘ç°åœ¨ä¼šæŠŠæŸä¸ªäººçš„å…«å­—å’Œå‘½ç†å‘Šè¯‰ä½ 
    æ³¨æ„æ­¤äººçš„æ€§åˆ«æ˜¯{sex}
    å›ç­”æ—¶ï¼Œå¦‚æœæ€§åˆ«æ˜¯å¥³ï¼Œç”¨å¥¹ã€‚æ€§åˆ«æ˜¯ç”·ï¼Œç”¨ä»–ã€‚
    è¯·æ ¹æ®æˆ‘å‘çš„å…«å­—å’Œå‘½ç†ç»™å‡ºåˆ°å¯¹åº”çš„å‘½è¿æè¿°ï¼Œå¹¶å¸®æˆ‘ç»„ç»‡ä¸‹è¯­è¨€å‘æˆ‘ç™½è¯æ–‡ï¼Œæ³¨æ„ä¸è¦å‡ºç°'æ ¹æ®ä½ æä¾›xxx'
    æ³¨æ„è¿”å›åœ¨100-150å­—
    ç”¨jsonçš„æ ¼å¼è¿”å›. æ ¼å¼ä¸º {{â€responseâ€œ:å‘½è¿æè¿°çš„ç™½è¯æ–‡}}
    """
    completion = client.chat.completions.create(
        model="gpt-3.5-turbo-1106",                                          # æ¨¡å‹é€‰æ‹©GPT 3.5 Turbo
        messages=[{"role": "system", "content": prompt},
                {"role": "user", "content":f"å…«å­—ä¸ºï¼š{bazi} \n\n å‘½è¿ä¸ºï¼š{mingyun}"}],
        max_tokens = 2048,
        temperature = 0,
        response_format={"type": "json_object"}

    )
    string_res = completion.choices[0].message.content.strip()
    string_res = json.loads(string_res)

    return string_res["response"]

def chushenGPT(bazi,chushen,sex):
    prompt = f"""
    ä½ æ˜¯ä¸ªç®—å‘½å¤§å¸ˆï¼Œæˆ‘ç°åœ¨ä¼šæŠŠæŸä¸ªäººçš„å…«å­—å‘Šè¯‰ä½ 
    è¯·æ ¹æ®æˆ‘å‘çš„å…«å­—å’Œå‡ºèº«æƒ…å†µæ‰©å†™æˆä¸ªäººçš„å‡ºèº«æƒ…å†µ
    æ³¨æ„æ­¤äººçš„æ€§åˆ«æ˜¯{sex}
    å›ç­”æ—¶ï¼Œå¦‚æœæ€§åˆ«æ˜¯å¥³ï¼Œç”¨å¥¹ã€‚æ€§åˆ«æ˜¯ç”·ï¼Œç”¨ä»–ã€‚
    æ³¨æ„è¿”å›åœ¨100-150å­—
    æ³¨æ„å‰åé€»è¾‘ä¸€è‡´æ€§
    ç”¨jsonçš„æ ¼å¼è¿”å›. æ ¼å¼ä¸º {{â€responseâ€œ:å‡ºèº«æƒ…å†µ}}
    """

    completion = client.chat.completions.create(
        model="gpt-3.5-turbo-1106",                                          # æ¨¡å‹é€‰æ‹©GPT 3.5 Turbo
        messages=[{"role": "system", "content": prompt},
                {"role": "user", "content":f"å…«å­—ä¸ºï¼š{bazi} \n\nå‡ºèº«æƒ…å†µ: {chushen}"}],
        max_tokens = 2048,
        temperature = 0,
        response_format={"type": "json_object"}

    )
    string_res = completion.choices[0].message.content.strip()
    string_res = json.loads(string_res)

    return string_res["response"]

import io
import os

import sys
import threading

def capture_print(func):
    def wrapper(*args, **kwargs):
        lock = threading.Lock()
        captured_output = io.StringIO()
        current_stdout = sys.stdout
        try:
            sys.stdout = captured_output
            # è·å–é”
            lock.acquire()
            res = func(*args, **kwargs)
            return res,captured_output.getvalue()
        finally:
            # é‡Šæ”¾é”
            lock.release()
            sys.stdout = current_stdout
    return wrapper


@capture_print
def bazipaipan(year, month, day, time, gender,name=None,tg_bot=False):
    def check_gan(gan, gans):
        result = ''
        if ten_deities[gan]['åˆ'] in gans:
            result += "åˆ" + ten_deities[gan]['åˆ']
        if ten_deities[gan]['å†²'] in gans:
            result += "å†²" + ten_deities[gan]['å†²']
        return result
    def yinyang(item):
        if item in Gan:
            return 'ï¼‹' if Gan.index(item)%2 == 0 else 'ï¼'
        else:
            return 'ï¼‹' if Zhi.index(item)%2 == 0 else 'ï¼'
    def get_shens(gans, zhis, gan_, zhi_):
        
        all_shens = []
        for item in year_shens:
            if zhi_ in year_shens[item][zhis.year]:    
                all_shens.append(item)
                    
        for item in month_shens:
            if gan_ in month_shens[item][zhis.month] or zhi_ in month_shens[item][zhis.month]:     
                all_shens.append(item)
                    
        for item in day_shens:
            if zhi_ in day_shens[item][zhis.day]:     
                all_shens.append(item)
                    
        for item in g_shens:
            if zhi_ in g_shens[item][mingzhu]:    
                all_shens.append(item) 
        if all_shens:  
            return "  ç¥:" + ' '.join(all_shens)
        else:
            return ""
    if tg_bot:
        start="ğŸ”¹"
        end = ""
    else:     
        start = "<b>"
        end = "</b>"
    if name:
        print(f"{start}å§“åï¼š{end}{name}")
    sex = 'å¥³' if gender else 'ç”·' # 1 ä¸ºç”·ï¼Œ0 ä¸ºå¥³
    print(f"{start}æ€§åˆ«ï¼š{end}{sex}")
    day_lunar = sxtwl.fromSolar(int(year), int(month), int(day))


    lunar_birthday = day_lunar.getLunarYear() # å†œå†
    Lleap = "é—°" if day_lunar.isLunarLeap() else ""
    lunar = Lunar.fromYmdHms(day_lunar.getLunarYear(), day_lunar.getLunarMonth(), day_lunar.getLunarDay(),int(time), 0, 0)
    zodiac = lunar.getYearShengXiao()
    eightWord = lunar.getEightChar() # å…«å­—
    print(f"{start}ç”Ÿè‚–ï¼š{end}{zodiac}")
    print(f"{start}å…¬å†ï¼š{end}", end='')
    print("{}å¹´{}æœˆ{}æ—¥{}æ—¶".format(day_lunar.getSolarYear(), day_lunar.getSolarMonth(), day_lunar.getSolarDay(),eightWord.getTime()[1]))
    print(f"{start}å†œå†ï¼š{end}", end='')
    print("{}å¹´{}{}æœˆ{}æ—¥{}æ—¶".format(day_lunar.getLunarYear(), Lleap, day_lunar.getLunarMonth(), day_lunar.getLunarDay(),eightWord.getTime()[1]))

    print(f"{start}å…«å­—ï¼š{end}{eightWord}")
    gz = day_lunar.getHourGZ(int(time))
    yTG = day_lunar.getYearGZ()
    mTG = day_lunar.getMonthGZ()
    dTG  = day_lunar.getDayGZ()
    Gans = collections.namedtuple("Gans", "year month day time")
    Zhis = collections.namedtuple("Zhis", "year month day time")
    gans = Gans(year=Gan[yTG.tg], month=Gan[mTG.tg], 
                day=Gan[dTG.tg], time=Gan[gz.tg])
    zhis = Zhis(year=Zhi[yTG.dz], month=Zhi[mTG.dz], 
                day=Zhi[dTG.dz], time=Zhi[gz.dz])
    mingzhu = gans.day

    tianganshishen = lunar.getBaZiShiShenGan()
    dizhishishen = lunar.getBaZiShiShenZhi()
    nianshishen = lunar.getBaZiShiShenYearZhi()
    yueshishen = lunar.getBaZiShiShenMonthZhi()
    rishishen = lunar.getBaZiShiShenDayZhi()
    shishishen = lunar.getBaZiShiShenTimeZhi()
    shishen = [tianganshishen[0], tianganshishen[1], tianganshishen[3]]
    shishen.extend(nianshishen)
    shishen.extend(yueshishen)
    shishen.extend(rishishen)
    shishen.extend(shishishen)

    wuXing = lunar.getBaZiWuXing()  # äº”è¡Œ
    print(f"{start}äº”è¡Œï¼š{end}", end='')
    print(' '.join(wuXing))
    print(f"{start}å‘½ä¸»ï¼š{end}{mingzhu}{wuXing[2][0]}")
    scores = {"é‡‘":0, "æœ¨":0, "æ°´":0, "ç«":0, "åœŸ":0} # äº”è¡Œåˆ†æ•°
    for item in gans:  
        scores[gan5[item]] += 5

    for item in list(zhis) + [zhis.month]:  
        for gan in zhi5[item]:
            scores[gan5[gan]] += zhi5[item][gan]

    
    elements_with_scores = [f"{element}{score}" for element, score in scores.items()]
    result = "ï¼Œ".join(elements_with_scores)
    print(f"{start}äº”è¡Œå¾—åˆ†ï¼š{end}{result}")
    print(f"{start}äº”è¡Œæ˜¯å¦æœ‰ç¼ºï¼š{end}", end='')
    all_elements = {'é‡‘', 'æœ¨', 'æ°´', 'ç«', 'åœŸ'}
    elements = set(''.join(wuXing))
    missing = all_elements - elements
    if len(missing)==0:
        print("æ‚¨å…«å­—ä¸­äº”è¡Œè¯¸å…¨ï¼Œäº”è¡Œä¸ç¼ºã€‚")
    else:
        print("æ‚¨å…«å­—ä¸­äº”è¡Œç›¸å¯¹ç¼º"+"ï¼Œ".join(missing)+"ã€‚")
    print(f"{start}å‘½ç†åˆ†æï¼š{end}")
    zhus = [item for item in zip(gans, zhis)]
    sum_index = ''.join([mingzhu, 'æ—¥', *zhus[3]])
    if sum_index in summarys:     
        mingyun_analysis = mingyunGPT(eightWord,summary[sum_index],sex)
    else:
        mingyun_analysis = mingyunGPT(eightWord,f"æ­¤äººç”Ÿäº{sum_index}",sex)

    print(mingyun_analysis)

    scores_table = {
    "æ­£è´¢": (2.5, 2),
    "æ­£å®˜": (2.5, 2),
    "æ­£å°": (2, 1.5),
    "æ¯”è‚©": (0.5, 0.5),
    "é£Ÿç¥": (1, 0.5),
    "åè´¢": (1.5, 1),
    "ä¸ƒæ€": (-2, -1.5),
    "åå°": (-0.5, 0),
    "åŠ«è´¢": (-2, -1.5),
    "ä¼¤å®˜": (-1, -0.5),
    }
    score = 0
    for ts in tianganshishen[:2]:
        score+=scores_table[ts][0]
    for ds in dizhishishen[:2]:
        score+=scores_table[ds][1]
    if score>=7:
        birth = 'æå¥½'
    elif score>=3:
        birth = 'è¾ƒå¥½'
    elif score>=-2:
        birth = 'å°šå¯'
    elif score>=-5:
        birth = 'ä¸€èˆ¬'
    else:
        birth = 'å¯’é—¨'
    chushen_analysis = chushenGPT(eightWord,birth,sex)
    print(chushen_analysis)
    print(f"{start}ç”Ÿè‚–åˆ†æï¼š{end}\n{sx_xingge[zodiac]}")
    print(f"{start}è´¢è¿åˆ†æï¼š{end}")
    caiyun_analysis = caiyunGPT(eightWord,shishen,scores,sex)
    print(caiyun_analysis)
    print(f"{start}å§»ç¼˜åˆ†æï¼š{end}")
    yinyuan_analysis = yinyuanGPT(eightWord,shishen,scores,sex)
    print(yinyuan_analysis)
    print(f"{start}æ€§æ ¼åˆ†æï¼š{end}")
    xingge_analysis = xinggeGPT(eightWord,shishen,scores,sex)
    print(xingge_analysis)
    print("---------------")
    print("åç¥:", end='')
    print('\t'.join(shishen))
    print("åç¥ç¥ç…ï¼š")
    for ss in shishen:
        print(f"\t{ss}:{shishen_shensha[ss]}")
    print("åç¥åˆ†æï¼š")
    print(shishenGPT(shishen,sex))
    sum_index = ''.join([mingzhu, 'æ—¥', *zhus[3]])
    print(sum_index)
    if summary.get(sum_index):
        print(summary[sum_index])

    print("å¤§è¿æµå¹´åˆ†æï¼š")
    dayuns = []
    # è®¡ç®—å¤§è¿
    seq = Gan.index(gans.year)
    if gender:
        if seq % 2 == 0:
            direction = 1
        else:
            direction = -1
    else:
        if seq % 2 == 0:
            direction = -1
        else:
            direction = 1
    gan_seq = Gan.index(gans.month)
    zhi_seq = Zhi.index(zhis.month)
    for i in range(12):
        gan_seq += direction
        zhi_seq += direction
        dayuns.append(Gan[gan_seq%10] + Zhi[zhi_seq%12])
    birthday = datetime.date(day_lunar.getSolarYear(), day_lunar.getSolarMonth(), day_lunar.getSolarDay()) 
    count = 0
    for i in range(30):    
        #print(birthday)
        day_ = sxtwl.fromSolar(birthday.year, birthday.month, birthday.day)
        if day_.hasJieQi() and day_.getJieQi() % 2 == 1:
                break
            #break        
        birthday += datetime.timedelta(days=direction)
        count += 1
    ages = [(round(count/3 + 10*i), round(int(year) + 10*i + count//3)) for i in range(8)]
    ages.insert(0,(0,int(year)))
    for (seq, value) in enumerate(ages):
        gan_ = dayuns[seq][0]
        zhi_ = dayuns[seq][1]
        fu = '*' if (gan_, zhi_) in zhus else " "
        zhi5_ = ''
        for gan in zhi5[zhi_]:
            zhi5_ = zhi5_ + "{}{}{}ã€€".format(gan, gan5[gan], ten_deities[mingzhu][gan]) 
        
        zhi__ = set() # å¤§è¿åœ°æ”¯å…³ç³»
        
        for item in zhis:
            for type_ in zhi_atts[zhi_]:
                if item in zhi_atts[zhi_][type_]:
                    zhi__.add(type_ + ":" + item)
        zhi__ = '  '.join(zhi__)
        
        empty = chr(12288)
        if zhi_ in empties[zhus[2]]:
            empty = 'ç©º'        
        
        jia = ""
        if gan_ in gans:
            for i in range(4):
                if gan_ == gans[i]:
                    if abs(Zhi.index(zhi_) - Zhi.index(zhis[i])) == 2:
                        jia = jia + "  --å¤¹ï¼š" +  Zhi[( Zhi.index(zhi_) + Zhi.index(zhis[i]) )//2]
                    if abs( Zhi.index(zhi_) - Zhi.index(zhis[i]) ) == 10:
                        jia = jia + "  --å¤¹ï¼š" +  Zhi[(Zhi.index(zhi_) + Zhi.index(zhis[i]))%12]
                
        out = "å¤§è¿:{1:<4d}{2:<5s}{3} {15} {14} {13}  {4}:{5}{8}{6:{0}<6s}{12}{7}{8}{9} {10:{0}<15s} {11}".format(
            chr(12288), int(value[0]), '', dayuns[seq],ten_deities[mingzhu][gan_], gan_,check_gan(gan_, gans), 
            zhi_, yinyang(zhi_), '', zhi5_, zhi__,empty, fu, '', '') 
        gan_index = Gan.index(gan_)
        zhi_index = Zhi.index(zhi_)
        out = out + jia + get_shens(gans, zhis, gan_, zhi_)
        print(out)
        current_year = datetime.datetime.now().year
        zhis2 = list(zhis) + [zhi_]
        gans2 = list(gans) + [gan_]
        if value[0] > 100:
            continue
        for i in range(10):
            _year = value[1] + i
            if value[1]<current_year:
                continue
            if _year-current_year>20:
                continue

            day2 = sxtwl.fromSolar(value[1] + i, 5, 1)    
            yTG = day2.getYearGZ()
            gan2_ = Gan[yTG.tg]
            zhi2_ = Zhi[yTG.dz]
            fu2 = '*' if (gan2_, zhi2_) in zhus else " "
            #print(fu2, (gan2_, zhi2_),zhus)
            
            zhi6_ = ''
            for gan in zhi5[zhi2_]:
                zhi6_ = zhi6_ + "{}{}{}ã€€".format(gan, gan5[gan], ten_deities[mingzhu][gan])        
            
            # å¤§è¿åœ°æ”¯å…³ç³»
            zhi__ = set() # å¤§è¿åœ°æ”¯å…³ç³»
            for item in zhis2:
            
                for type_ in zhi_atts[zhi2_]:
                    if type_ == 'ç ´':
                        continue
                    if item in zhi_atts[zhi2_][type_]:
                        zhi__.add(type_ + ":" + item)
            zhi__ = '  '.join(zhi__)
            
            empty = chr(12288)
            if zhi2_ in empties[zhus[2]]:
                empty = 'ç©º'       
            out = "{1:>3d}å² {2:<5d}æµå¹´:{3} {15} {14} {13}  {4}:{5}{8}{6:{0}<6s}{12}{7}{8}{9} - {10:{0}<13s} {11}".format(
                chr(12288), int(value[0]) + i, value[1] + i, gan2_+zhi2_,ten_deities[mingzhu][gan2_], gan2_,check_gan(gan2_, gans2), 
                zhi2_, yinyang(zhi2_), ten_deities[mingzhu][zhi2_], zhi6_, zhi__,empty, fu2, nayins[(gan2_, zhi2_)], ten_deities[mingzhu][zhi2_]) 
            jia = ""
            if gan2_ in gans2:
                for i in range(5):
                    if gan2_ == gans2[i]:
                        zhi1 = zhis2[i]
                        if abs(Zhi.index(zhi2_) - Zhi.index(zhis2[i])) == 2:
                            # print(2, zhi2_, zhis2[i])
                            jia = jia + "  --å¤¹ï¼š" +  Zhi[( Zhi.index(zhi2_) + Zhi.index(zhis2[i]) )//2]
                        if abs( Zhi.index(zhi2_) - Zhi.index(zhis2[i]) ) == 10:
                            # print(10, zhi2_, zhis2[i])
                            jia = jia + "  --å¤¹ï¼š" +  Zhi[(Zhi.index(zhi2_) + Zhi.index(zhis2[i]))%12]  

                        if (zhi1 + zhi2_ in gong_he) and (gong_he[zhi1 + zhi2_] not in zhis):
                            jia = jia + "  --æ‹±ï¼š" + gong_he[zhi1 + zhi2_]
                            
            out = out + jia + get_shens(gans, zhis, gan2_, zhi2_)
            all_zhis = set(zhis2) | set(zhi2_)
            if set('æˆŒäº¥è¾°å·³').issubset(all_zhis):
                out = out + "  å¤©ç½—åœ°ç½‘ï¼šæˆŒäº¥è¾°å·³"
            if set('å¯…ç”³å·³äº¥').issubset(all_zhis) and len(set('å¯…ç”³å·³äº¥')&set(zhis)) == 2 :
                out = out + "  å››ç”Ÿï¼šå¯…ç”³å·³äº¥"   
            if set('å­åˆå¯é…‰').issubset(all_zhis) and len(set('å­åˆå¯é…‰')&set(zhis)) == 2 :
                out = out + "  å››è´¥ï¼šå­åˆå¯é…‰"  
            if set('è¾°æˆŒä¸‘æœª').issubset(all_zhis) and len(set('è¾°æˆŒä¸‘æœª')&set(zhis)) == 2 :
                out = out + "  å››åº“ï¼šè¾°æˆŒä¸‘æœª"             
            print(out)


    return mingyun_analysis,chushen_analysis
if __name__ =="__main__":
    year = '2024'
    month = '7'
    day = '25'
    time = '10'

    print(bazipaipan(year,month,day,time,True))
